<!doctype html>
<html>
  <head>
   	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/github.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
    	body {
    		font-family: Arial;
    		width: 800px;
			  margin: 5px auto;
        font-size: 12px;
    	}

    	hgroup h1 {
    		text-align: right;
  			border-bottom: 1px solid #CCC;
  			padding-bottom: 2px;
  			margin-bottom: 2px;
    	}

    	hgroup h1 .hljs {
    		padding: 2px;
        font-size: 12pt;
        border: none;
        background-color: white;
    	}

    	hgroup h2 {
    		text-align: right;
			  font-style: italic;
			  margin-top: 5px;
        color: #999900;
    	}

    	h1 pre {
    		padding: 3px;
    		margin: 0px;
    		float: left;
    	}

      .sample ul {
        list-style: none;
        padding: 10px;
      }

      .sample li {
        width: 250px;
        border: 1px solid #ccc;
        background-color: #FFFAAA;
        margin-bottom: 10px;
        padding: 5px;
      }

      .sample ol {
        padding: 25px;
      }

      .sample1 [dropzone] {
        min-height: 20px;
        width: 500px;
        border: 1px dashed #ADADAD;
      }

      [dropzone].drag-matches {
        border: 1px solid green;
        background-color: #CCFFCC;
      }

      .hljs {
        border: 1px solid #ccc;
      }

    </style>
  </head>
  <body>
  <a href="https://github.com/stevendwood/html5-dropzone"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"></a>

  <hgroup>
  	<h1>
  		<pre><code class="html">&lt;div dropzone=&quot;copy s:text/x-example&quot;&gt;</code></pre>
  		HTML5 [dropzone]
  	</h1>
  	
  	<h2>Cross browser HTML5 drag and drop</h2>
  </hgroup>
  <div id="main">
  	
  	<h1>Introduction</h1>
  	<p>
  		A small JavaScript library that provides an implementation of the proposed HTML5 dropzone attribute, and eases development of drag and drop the HTML5 way.
  	</p>

    <h2>Basic example</h2>
    <section class="sample sample1">
      In this example, drag and drop fruits betweem the two lists. You can use the platform keyboard modifiers to control whether elements are moved or copied between the lists, for example ctrl on windows will change from move to copy.

      <p>What fruits do you like?</p>
      <ul ondragstart="dragStartHandler(event)" ondragend="dragEndHandler(event)">
       <li draggable="true" data-value="fruit-apple">Apples</li>
       <li draggable="true" data-value="fruit-orange">Oranges</li>
       <li draggable="true" data-value="fruit-pear">Pears</li>
      </ul>

      <p>Drop your favorite fruits below, use ctrl on windows to control copy or move:</p>
      <ul dropzone="move string:text/x-example" ondrop="dropHandler(event)" ondragend="dragEndHandler(event)" ondragstart="dragStartHandler(event)">
      </ul>

      <p> 
          To get this to work, 1st we need to setup a drag start handler to place some data into the DataTransfer object of the drag event, and we need a dragend handler which will fire when the user finishes dragging.  This is just for example, typically you might prefer not to declare event handlers in markup :)
      </p>

       <pre><code class="html">&lt;ul ondragstart=&quot;dragStartHandler(event)&quot; ondragend=&quot;dragEndHandler(event)&quot;&gt; 
  &lt;li draggable=&quot;true&quot; data-value=&quot;fruit-apple&quot;&gt;Apples&lt;/li&gt;
  &lt;li draggable=&quot;true&quot; data-value=&quot;fruit-orange&quot;&gt;Oranges&lt;/li&gt;
  &lt;li draggable=&quot;true&quot; data-value=&quot;fruit-pear&quot;&gt;Pears&lt;/li&gt;
&lt;/ul&gt;</code></pre>
 <p>
    So in dragstart - we provide some data keyed by the example type "text/x-example", we also specify that the user is allowed to move or copy the list items.  We do the latter by specifying the <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer">effectAllowed</a>. 
 </p>
 <pre><code class="javascript">var internalDNDType = 'text/x-example'; 
function dragStartHandler(event) {
  if (event.target instanceof HTMLLIElement) {
    // use the element's data-value="" attribute as the value to be moving:
    event.dataTransfer.setData(internalDNDType, event.target.dataset.value);
    event.dataTransfer.effectAllowed = 'copyMove'; // only allow the data to be copied or moved
  } else {
    event.preventDefault(); // don't allow selection to be dragged
  }
}</code></pre>
 <p>
   Now that the dragstart is set up, we need to specify a drop target.  Typically you would need to do this by adding a bunch of event handlers to the node that can accept the drop, and cancelling the events if you decide that the element can take the drop given the data currently being dragged.  With the <code>dropzone</code> attribute you can skip all of that.
 </p>

 <pre><code class="html">&lt;ol dropzone=&quot;move string:text/x-example&quot;&gt; &lt;/ol&gt;</code></pre>

 <p>
   This dropzone specifies that the default operation is "move", and that we accept drags where the drag data kind is a string and the type is text/x-example.  The operation can be specified by the user using platform specific keyboard modifiers, if none are specified the default operation will be "move".  Finally define the drop and drag end handler, which reads the type that we set in dragstart and creates a new li element.  The dragend handler uses the custom function <code>getDropEffect()</code> to test what drop effect the user selected.  If the user did not complete the drop, or the used a keyboard modifier that specified linking then the drop is not allowed and the dropEffect is "none".
 </p>

    <pre>
      <code class="javascript">function dropHandler(event) {
  var li = document.createElement('li'),
      target = event.target,
      data = event.dataTransfer.getData(internalDNDType);

  if (data == 'fruit-apple') {
    li.textContent = 'Apples';
  } else if (data == 'fruit-orange') {
    li.textContent = 'Oranges';
  } else if (data == 'fruit-pear') {
    li.textContent = 'Pears';
  } else {
    li.textContent = 'Unknown Fruit';
  }
      
  if (target instanceof HTMLLIElement) {
    target.parentElement.appendChild(li);
  } else {
    target.appendChild(li);
  }
}

function dragEndHandler(event) {
  var dropEffect = event.dataTransfer.getDropEffect();

  if (dropEffect === "move") {
    event.target.parentElement.removeChild(event.target);
  }
} </code></pre>



    </section>
    <script>

        var internalDNDType = 'text/x-example'; // set this to something specific to your site
        function dragStartHandler(event) {
          if (event.target instanceof HTMLLIElement) {
              // use the element's data-value="" attribute as the value to be moving:
              event.dataTransfer.setData(internalDNDType, event.target.dataset.value);
              event.dataTransfer.effectAllowed = 'copyMove'; // only allow moves
          } else {
              event.preventDefault(); // don't allow selection to be dragged
          }
        }

      function dragEndHandler(event) {
          var dropEffect = event.dataTransfer.getDropEffect();

          if (dropEffect === "move") {
            event.target.parentElement.removeChild(event.target);
          }
      }

      function dropHandler(event) {
          var li = document.createElement('li'),
              target = event.target,
              data = event.dataTransfer.getData(internalDNDType);
          if (data == 'fruit-apple') {
              li.textContent = 'Apples';
          } else if (data == 'fruit-orange') {
              li.textContent = 'Oranges';
          } else if (data == 'fruit-pear') {
              li.textContent = 'Pears';
          } else {
              li.textContent = 'Unknown Fruit';
          }
          
          if (target instanceof HTMLLIElement) {
            target.parentElement.appendChild(li);
          } else {
            target.appendChild(li);
          }
        }
    </script>

  </div>
   <script src="dist/dropzone.min.js"></script>
  </body>
</html>