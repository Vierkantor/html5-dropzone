{"name":"Html5-dropzone","tagline":"","body":"\r\n\r\n#html5 [dropzone]\r\n\r\n\r\nA small JavaScript library that provides a usable implementation of the HTML5 [dropzone](http://www.whatwg.org/specs/web-apps/current-work/multipage/interaction.html#the-dropzone-attribute) attribute, eases implementation of HTML5 drag and drop apps  and gets drag and drop to work in the intended HTML 5 style cross browser.  \r\n\r\n\r\n[Multiple dropzone demo](http://stevendwood.github.io/html5-dropzone/examples/cards.html) - This demo is based on a JQuery drag and drop example and shows how you can have different dropzones that can be fussy about what they accept even on IE.  \r\n\r\n[Custom drag image demo](http://stevendwood.github.io/html5-dropzone/examples/custom-drag-image.html) - This demo shows a custom drag image or ghost, works on IE as well despite the lack of a setDragImage function.\r\n\r\n<!-- START doctoc generated TOC please keep comment here to allow auto update -->\r\n<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\r\n**Table of Contents**  *generated with [DocToc](http://doctoc.herokuapp.com/)*\r\n\r\n- [Features](#features)\r\n- [Usage](#usage)\r\n- [Why do i need a library for native drag and drop ?](#why-do-i-need-a-library-for-native-drag-and-drop-)\r\n- [Using ``dropzone``](#using-dropzone)\r\n  - [Setting up a dropzone](#setting-up-a-dropzone)\r\n  - [Styling the dropzone](#styling-the-dropzone)\r\n  - [Multiple dropzones](#multiple-dropzones)\r\n- [Drag sources](#drag-sources)\r\n  - [Using ``draggable()``](#using-draggable)\r\n    - [<code>setData()</code>](#codesetdatacode)\r\n    - [<code>effectAllowed()</code>](#codeeffectallowedcode)\r\n    - [Customising the drag image](#customising-the-drag-image)\r\n      - [<code>ghost()</code>](#codeghostcode)\r\n    - [<code>event.getDropEffect()</code>](#codeeventgetdropeffectcode)\r\n\r\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\r\n\r\n##Features\r\n\r\n1. Use the dropzone attribute on any element.\r\n\r\n  ```html\r\n  <!-- Accept drops of text/x-paper with a default operation of move -->\r\n  <div id=\"paperbin\" dropzone=\"move string:text/x-paper\"></div>\r\n\r\n  <!-- Accept drops of text/x-paper and text/x-apple with a default operation of move -->\r\n  <div id=\"trashbin\" dropzone=\"move s:text/x-paper s:text/x-apple\"></div>\r\n\r\n  <!-- Accept any image files and and elements or text from another application that produce text/plain -->\r\n  <div dropzone=\"copy f:image/* s:text/plain\"></div>\r\n  ```\r\n\r\n2. Store any type of data you like in DataTransfer.setData on Internet Explorer too (not just \"Text\" and \"Url\")\r\n  ```javascript\r\n    onDragStart: function(event) {\r\n      // this now works on IE\r\n      event.dataTransfer.setData(\"text/x-example\", \"foo\");\r\n    }\r\n    ```\r\n3. Reliably read the dropEffect on source elements at the dragend using getDropEffect(). e.g. if you haven't tried to do this :\r\n  ```javascript\r\n    // implemented on the draggable source\r\n  function dragStartHandler(event) {\r\n      event.dataTransfer.effectAllowed = \"copyMove\"\r\n  }\r\n\r\n  // implemented on the drop target\r\n  function dragOverHandler(event) {\r\n      event.dataTransfer.dropEffect = \"move\";\r\n  }\r\n\r\n  function dragEndHandler(event) {\r\n      // following a successful drop...\r\n      event.dataTransfer.dropEffect; // \"move\" on all browsers except IE which reports \"none\"\r\n      event.dataTransfer.getDropEffect(); // \"move\" on all browsers\r\n  }\r\n    ```\r\n4. Easily accept files*\r\n    ```html\r\n    <div dropzone=\"copy file:text/csv\"></div>\r\n    <script>\r\n       document.getElementById(\"dz\").addEventListener(\"drop\", function(event) {\r\n          event.dataTransfer.files; // contains any files dropped,\r\n       });\r\n    ```\r\n    *(on Firefox and IE this will allow a drop of any file, on Chrome and Safari it will only cancel the dragover/enter events where the file is actually of text/csv type) However since the dropzone will cancel the dragovers if any file is of type CSV you need\r\n    to check the type on drop anyway incase there was more than one file in the drag.\r\n    \r\n5. <code>draggable</code> function to ease working with drag sources and provide custom ghost elements even on Internet Explorer.\r\n  ```javascript\r\n    // make the element draggable, with two content types, \r\n    // it can only be copied and it has a custom ghost element function\r\n    draggable(\"#dragMe\")\r\n          .setData(\"text/plain\", \"Some plain text\")\r\n          .setData(\"text/html\", \"Some <b>HTML</b> text\")\r\n          .effectAllowed(\"copy\")\r\n          .ghost(function() { \r\n              var p = document.createElement(\"p\");\r\n              p.innerHTML = \"I'm a custom ghost\";\r\n              p.classList.add(\"my-custom-ghost\");\r\n              return p;\r\n          });\r\n  ```\r\n\r\n\r\nAllows you to store any data you like in the data transfer object, getting round the major IE limitation which usually only allows \"Text\" or \"Url\" in the set/get Data methods.  By using the dropzone attribute, you don't need to implement dragover and dragenter event handlers in order to accept the drop.  You also get some CSS classes added and removed when a drag is over a valid drop target and a valid drop effect is selected. \r\n\r\nSupports: IE10+, Chrome, Firefox, Safari\r\n\r\n##Usage\r\n\r\nThis example also uses the <code>draggable</code> function which avoids the need to implement a dragstart listener.\r\n\r\n```html\r\n<div id=\"paper\" draggable=\"true\"></div>\r\n<div id=\"apple\" draggable=\"true\"></div>\r\n    \r\n<div dropzone=\"move s:text/x-paper\" ondrop=\"handleDropPaper(event)\"></div>\r\n<div dropzone=\"move s:text/x-apple\" ondrop=\"handleDropApple(event)\"></div>\r\n\r\n<script src=\"dropzone.min.js\"></script>\r\n<script>\r\n      draggable(\"#paper\")\r\n          .setData(\"text/x-paper\", \"Data for the x-paper drag type\");\r\n        \r\n      draggable(\"#apple\")\r\n          .setData(\"text/x-apple\", \"Data for the x-apple drag type\");\r\n\r\n      function handleDropPaper(e) {\r\n          e.dataTransfer.getData(\"x-paper\"); // \"Data for the x-paper drag type\"\r\n       }\r\n\r\n      function handleDropApple(e) {\r\n          e.dataTransfer.getData(\"x-paper\"); // \"Data for the x-apple drag type\"\r\n      }\r\n      \r\n</script>\r\n```\r\n\r\nFor anyone familiar with the HTML5 drag and drop API, this code is roughly the equivalent of the following code which will not run on IE, and will not handle adding and removing the classes to the drop target elegantly when there are other elements inside the drop target... :\r\n\r\n```html\r\n<!-- (FOR ILLUSTRATION ONLY - DOES NOT WORK !!) -->\r\n<div id=\"paper\" draggable=\"true\" ondragstart=\"startDragPaper(event)\"></div>\r\n<div id=\"apple\" draggable=\"true\" ondragstart=\"startDragApple(event)\"></div>\r\n    \r\n<div  ondragover=\"isPaper(event)\" ondragenter=\"isPaper(event)\" ondragleave=\"removeClass(event)\" ondrop=\"handleDropPaper(event)\"></div>\r\n<div  ondragover=\"isApple(event)\" ondragenter=\"isApple(event)\" ondragleave=\"removeClass(event)\" ondrop=\"handleDropApple(event)\"></div>\r\n\r\n<script>\r\n\r\n      function startDragPaper(e) {\r\n        // This will throw an exception on IE\r\n        e.dataTransfer.setData(\"text/x-paper\", \"Data for the x-paper drag type\");\r\n      }\r\n\r\n      function startDragApple(e) {\r\n        // This will throw an exception on IE\r\n        e.dataTransfer.setData(\"text/x-apple\", \"Data for the x-apple type\");\r\n      }\r\n\r\n      function isPaper(event) {\r\n        if (event.dataTransfer.types.indexOf(\"x-paper\") !== -1) {\r\n          event.target.classList.add(\"drag-matches\");\r\n          event.stopPropagation();\r\n        }\r\n      }\r\n       \r\n      function isApple(event) {\r\n        if (event.dataTransfer.types.indexOf(\"x-apple\") !== -1) {\r\n          event.target.classList.add(\"drag-matches\");\r\n          event.stopPropagation();\r\n        }\r\n      }\r\n\r\n      function removeClass(event) {\r\n        event.target.classList.remove(\"drag-matches\");\r\n      }\r\n\r\n      function handleDropPaper(e) {\r\n         // will throw an error on IE\r\n         e.dataTransfer.getData(\"x-paper\"); // \"Data for the x-paper drag type\"\r\n      }\r\n\r\n       function handleDropApple(e) {\r\n         // will throw an error on IE\r\n         e.dataTransfer.getData(\"x-paper\"); // \"Data for the x-apple drag type\"\r\n      }\r\n      \r\n</script>\r\n```\r\n\r\n## Why do i need a library for native drag and drop ?\r\n\r\nI've spent many months toiling with HTML5 drag and drop on different browsers, this library represents the sum of my knowledge on the subject, hopefully it will save anyone using it a lot of time and hassle.  HTML5 drag and drop does not work natively cross browser regardless of the dropzone attribute. \r\n\r\n__Lots of events__\r\n\r\nIt's clumsy and requires working with lots of events.  For example to allow a user to drag one element and drop it on top of another you need to :\r\n\r\n1. Implement the dragstart event.\r\n2. Implement dragenter and ...\r\n3. ...dragover handlers on the target, at the very least to cancel the events\r\n4. Implement dragleave if you planned on styling the node on dragover/enter to show it can take the drop.\r\n5. Implement a drop handler.\r\n\r\nThe deal is that on dragstart - you put data into the [DataTransfer](http://html5index.org/Drag%20and%20Drop%20-%20DataTransfer.html) object, this data is keyed by type - so you can provide a representation in plain text, as HTML or whatever you like.  When a drop happens either in another web page or a native application, the data store will be asked for data according to what the recieving application wants.\r\n\r\ndragenter and dragover at least need to be cancelled if you want an element to accept the drop, so you must implement them even if to do nothing other than cancel the drag event.\r\n\r\n__How to I decide whether to cancel the dragenter/dragover events ?__\r\n\r\nThe default action of the browser in this case is not to allow a drop, so we need to cancel the dragenter/dragover events on any drop target it if we want to change that.  In order to decide whether or not you accept a drop - you need to consider a number of things :\r\n\r\n__1 Do I recognise the type of what is being dragged__ ?\r\n\r\nDuring dragover/enter you get access to a list of strings, these being the types of things that are currently being dragged.  Some browsers provide a list of [DataTransferItems](http://html5index.org/Drag%20and%20Drop%20-%20DataTransferItem.html) but some don't.  The data transfer item doesn't help here all that much since you only get told the \"kind\" of thing in addition to the type - i.e. is it a file or a string.  You cannot see exactly what is being dragged due to security considerations, which is fair enough.  \r\n\r\nThis is generally workable, __except that in Internet Explorer including version 11 - you cannot store any other information except \"Text\" and \"Url\"__.  You therefore have no hope of conditionally accepting a drop if you based your decision solely  on the reported types of what is being dragged.  If you try the examples from the spec. IE will throw an exception as soon as you try and store something that is not \"Text\" or \"Url\".  \r\n\r\n__2 Does the drag source allow the effect I want to apply ?__\r\n\r\nThere are two properties of interest here - effectAllowed and dropEffect. The general idea seems to be that the source of a drag indicates (by setting effectAllowed) that it can be (e.g.) moved and copied, or that it can only be copied.  The drop target can specify which action it wants to take on dragover by setting the dropEffect, e.g. if it sets the dropEffect to link and the effectAllowed is \"move\" - then it would seem reasonable that the drop should not be allowed.  This is how all browsers except IE work.  This library fixes this behaviour on IE.\r\n\r\n__Drop Effect and Effect Allowed__\r\nYou can set effectAllowed ondragstart, and dropEffect on dragover.  The information below is regardless\r\nof whether you cancel the appropriate events to indicate you accept the drop.  You must cancel the dropevent in order for the dropEffect to be passed to the dragend function.\r\n\r\nThere are three things to consider :\r\n\r\n__2.1 Should the drop be accepted only if the dropEffect set to a valid value given the effectAllowed ?__\r\n\r\nIf the dropEffect is not one of the effectAllowed values, then all browsers except IE do not accept the drop. IE allows any drop regardless of the dropEffect and the effectAllowed (this library fixes this).\r\n\r\n```javascript\r\n// implemented on the draggable source\r\nfunction dragStartHandler(event) {\r\n   event.dataTransfer.effectAllowed = \"copyMove\"\r\n}\r\n\r\n// implemented on the drop target\r\nfunction dragOverHandler(event) {\r\n   event.dataTransfer.dropEffect = \"link\";\r\n   ...\r\n}\r\n```\r\n\r\nIn the above example the drop target cannot accept the drop as it does not specify a valid dropEffect.  This would not normally work on IE but by using this library the above code will result in the drop not being allowed on any browser.\r\n\r\n__2.2 Does the cursor update to give the user feedback on what will happen if they drop ?__\r\n\r\nChrome & Safari will change the mouse cursor to fit the dropEffect. So does Mozilla on mac. Mozilla on windows and IE both look at the first effect they come across in the effectAllowed and set the cursor on any valid drop target to be that. Except IE who seem to always use \"link\" if that is in the effectAllowed e.g. if effectAllowed is \"copyLink\" and we set dropEffect to \"link\" on dragover - Mozilla will set the\r\ncursor to \"copy\" but IE set it to \"link\".  IE seems to have \"link\" as always winning. When you press ctrl, mozilla update the cursor in response. So it seems you cannot programatically affect the cursor in Mozilla by changing the drop effect in dragover.\r\n\r\n__2.3 Is the dropEffect reported at the source element on dragend ?__\r\n\r\nThe spec shows that the source can listen for the dragend event to see what happened.  It should look at the dropEffect within this event. Chrome, Mozilla and Safari work as you would hope here, the drop effect appears in the dragend event. In IE if the effect allowed is a simple value e.g. \"copy\" then any successful drop results in this value  appearing as the dropEffect on dragend.  If the effectAllowed was a compound value like \"copyMove\" and the drop target tried to select \"move\" on dragover by setting the dropEffect, you're out of luck, that will come through as  dropEffect = \"none\" at the source on dragend.   \r\n\r\n```javascript\r\n// implemented on the draggable source\r\nfunction dragStartHandler(event) {\r\n   event.dataTransfer.effectAllowed = \"move\"\r\n}\r\n\r\n// implemented on the drop target\r\nfunction dragOverHandler(event) {\r\n   event.dataTransfer.dropEffect = \"move\";\r\n   ...\r\n}\r\n\r\nfunction dragEndHandler(event) {\r\n    // following a successful drop...\r\n    event.dataTransfer.dropEffect; // \"move\" on all browsers\r\n}\r\n\r\n```\r\n\r\nBut, supposing we tried this\r\n\r\n```javascript\r\n// implemented on the draggable source\r\nfunction dragStartHandler(event) {\r\n   event.dataTransfer.effectAllowed = \"copyMove\"\r\n}\r\n\r\n// implemented on the drop target\r\nfunction dragOverHandler(event) {\r\n   event.dataTransfer.dropEffect = \"move\";\r\n   ...\r\n}\r\n\r\nfunction dragEndHandler(event) {\r\n    // following a successful drop...\r\n    event.dataTransfer.dropEffect; // \"move\" on all browsers except IE which reports \"none\"\r\n}\r\n\r\n```\r\nThen the dropEffect is reported as \"none\" on IE, but is correctly reported on the other browsers. To fix this I introduced a new method you can call called getDropEffect() :\r\n\r\n```javascript\r\nfunction dragEndHandler(event) {\r\n    // following a successful drop...with effectAllowed set to copyMove\r\n    event.dataTransfer.dropEffect; // \"move\" on all browsers except IE which reports \"none\"\r\n    event.dataTransfer.getDropEffect(); // \"move\" on all browsers.\r\n}\r\n```\r\n\r\n__Other notes__\r\n\r\nOn Safari on a mac - effectAllowed cannot be set programatically, therefore any dropEffect that gets set is valid. When you press the cmd key the effectAllowed becomes \"move\" and when you press the alt key the effectAllowed becomes \"copy\".  Thereafter it works as you would hope, if the dropEffect is not one of these effectAlloweds the drop is not allowed by the browser.  \r\n\r\n__What does all this mean ?__\r\n\r\nShould the \"operation\" part of the dropzone be used to set the drop effect ?  My conclusion was yes, provided that keyboard shortcuts can change it - i.e. if you do nothing you get the operation, otherwise you get the operation as specified by the keyboard. So for a drop zone with \"move\" then if you do not use the keyboard, you get a dropEffect of move, otherwise the dropEffect is selected based on the keyboard modifiers.  If this produces a disallowed effectAllowed the drop will not be acceptable.\r\n\r\n\r\nYou also get a class added ondragover reflecting the dropEffect -  drag-matches.copy  drag-matches.move or drag-matches.link. \r\n\r\n\r\n## Using ``dropzone``\r\n\r\nThe dropzone attribute makes an element able to accept drops. If an element has a dropzone attribute, this will be parsed and used to decide whether or not to cancel the drag events required to tell the browser a drop is accepted.\r\n\r\n```html\r\n<div dropzone=\"copy s:text/plain s:text/x-my-custom-type\" ondrop=\"handleDrop(event)\"></div>\r\n```\r\nThis example will make the element accept any drag that contains data text/plain or text/x-my-custom-type. \r\n\r\n\r\n\r\n### Setting up a dropzone\r\n\r\nThis simple example allows the user to drag the element with id \"paper\" and drop it on the div with id \"trashcan\".  Using this library (and the dropzone attribute), there is no need to cancel the dragenter and dragover events and provide styling in the dragenter/dragleave events.\r\n\r\n```html\r\n<div id=\"paper\" draggable=\"true\" ondragstart=\"startDrag(event)\">I'm a bit of paper</div>\r\n<div id=\"trashcan\" dropzone=\"move string:text/x-paper\" ondrop=\"handleDrop(event)\"></div>\r\n\r\n<script>\r\n  function startDrag(e) {\r\n      e.dataTransfer.setData(\"text/x-paper\", \"put whatever you like in here\");\r\n  }\r\n    \r\n  function handleDrop(e) {\r\n      var paper = document.querySelector(\"#paper\")\r\n      paper.parentElement.removeChild(paper);\r\n  }\r\n</script>\r\n```\r\nUsing the dropzone attribute on an element passed to the dropzone function will automatically cancel any dragover events where the data being dragged matches the dropzone specification.  The above example will work on Internet Explorer as well despite the custom type used in the setData call.\r\n\r\nIf you don't like the dropzone attribute or prefer to use unobtrusive JavaScript :\r\n\r\n```javascript\r\ndropzone(document.querySelector(\"#trashcan\"), \"move s:text/x-paper\");\r\n\r\n// or....\r\n\r\ndropzone(document.querySelector(\"#trashcan\"), {\r\n    operation: \"copy\",\r\n    accepts: [{\r\n        kind: \"string\",\r\n        type: \"text/x-paper\"\r\n    }]  \r\n}).on(\"drop\", handleDrop);\r\n\r\nfunction handleDrop(e) {\r\n    var paper = document.querySelector(\"#paper\");\r\n    paper.parentElement.removeChild(paper);\r\n}\r\n\r\n```\r\n\r\n### Styling the dropzone\r\nWhenever the user drags something that matches over the dropzone, the class <code>drag-matches</code> is added to the target.  One (of many) annoying issue(s) when using drag and drop is that if the drop target contains other child elements, [the dragleave event will fire when you go over the child](http://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element), however the <code>drag-matches</code> class is only added or removed when you enter or leave the drop target, much the same as mousenter/works.   The following CSS classes are added to dropzones :\r\n\r\n1. <code>drag-matches</code> Added when the dropzone can accept a drop.\r\n2. <code>copy</code> Added when drag matches and the dropEffect is copy.\r\n3. <code>move</code> Added when drag matches and the dropEffect is move.\r\n4. <code>link</code> Added when drag matches and the dropEffect is link.\r\n\r\n### Multiple dropzones\r\nNow we can setup a 2nd dragsource and dropzone.  The 2nd dragsource is an apple, and since apples cannot go into a trashcan for paper, we need a 2nd dropzone.  This example demonstrates how dropzones can selectively accept or reject based on what is being dragged. Note that the recycle bin can accept either the paper or the apple but the paper bin can only accept the paper. \r\n\r\n```html\r\n<div id=\"paper\" draggable=\"true\" ondragstart=\"startDragPaper(event)\">I'm a bit of paper, drag me to the bin</div>\r\n<div id=\"apple\" draggable=\"true\" ondragstart=\"startDragApple(event)\"></div>\r\n\r\n<div id=\"paperbin\" dropzone=\"move string:text/x-paper\" ondrop=\"handleDropPaper(event)\"></div>\r\n<div id=\"recyclebin\" dropzone=\"move s:text/x-apple s:text/x-paper\" ondrop=\"handleDropApple(event)\"></div>\r\n\r\n<script>\r\n\r\n  function startDragPaper(e) {\r\n     e.dataTransfer.setData(\"text/x-paper\", \"put whatever you like in here\");\r\n  }\r\n\r\n  function startDragApple(e) {\r\n     e.dataTransfer.setData(\"text/x-apple\", \"put whatever you like in here\");\r\n  }\r\n        \r\n  // drop handlers not shown\r\n</script>\r\n```\r\n\r\n## Drag sources\r\n\r\n\r\n\r\n### Using ``draggable()``\r\n\r\nDepending on what you want to do, you don't have to use this function at all, however, if you want a customised drag image to work cross browser (read on IE) then you do need to use it.\r\n\r\nThe draggable function lets you specify nodes that can be dragged, what gets put into the data transfer, what the allowed effects are and a way to customise the drag image.  \r\n\r\n```html\r\n<div id=\"draggable\"></div>\r\n<script>\r\n    draggable(\"#draggable\")\r\n       .setData(\"text/x-my-type\", \"Some text\")\r\n       .setData(\"text/html\", function() { return \"some <b>HTML</b> content\"; })\r\n       .effectAllowed(\"copyMove\");\r\n</script>\r\n```\r\n\r\nThe above is equivalent to :\r\n\r\n```javascript\r\ndocument.getElementById(\"draggable\")\r\n  .addEventListener(\"dragstart\", function(e) {\r\n      e.dataTransfer.setData(\"text/x-my-type\", \"Some text\");\r\n      e.dataTransfer.setData(\"text/html\", \"some <b>HTML</b> content\");\r\n      e.dataTransfer.effectAllowed = \"copyMove\";\r\n  });\r\n```\r\nThe above sample will not work cross browser without this library but it will once you use it so you don't have to use draggable for the above if you don't want to.  One other thing is that the value you provide for a type can be a string value or a function that produces a string.  if it's a function, it gets called when the drag starts.\r\n\r\n#### <code>setData()</code>\r\nEquivalent to the DataTransfer.setData function, but saves you having to implement dragstart.  The 2nd param can be a string or a function that produces a string, gets called on drag start.\r\n\r\n#### <code>effectAllowed()</code>\r\nEquivalent to setting the DataTransfer.effectAllowed property, but saves you having to implement dragstart.  The 2nd param can be a string or a function that produces a string, gets called on drag start.\r\n\r\n#### Customising the drag image\r\n\r\nOne of the major holes of the IE implementation is the inability to provide a custom drag image.  The spec actually allows you to use a DOM element as the custom drag image, the trick being that it has to be visible.  To provide a custom drag image use the \"ghost\" function.  e.g consider a multi-select list.  If the user selects more than one thing, then we need to be able to indicate in the drag that more than one thing is being dragged.  In this example we provide a custom ghost image that addes into a UL a clone of all the list items having the \"selected\" class.\r\n\r\n#####<code>ghost()</code>\r\n\r\n[Custom drag image demo](http://stevendwood.github.io/html5-dropzone/examples/custom-drag-image.html)\r\n\r\nThe ghost function takes as an argument either a DOM node or a function that produces a DOM node and is called at drag start.  Typically this will be used in setDragImage for browsers that support.  Using this function allows you to supply any DOM node (doesn't have to be on the page).  e.g. :\r\n\r\n\r\n```javascript\r\nvar listItems = [].slice.call(document.querySelectorAll(\"li\"), 0);\r\n\r\nlistItems.forEach(function(li) {\r\n\r\n    li.addEventListener(\"click\", function() {\r\n        li.classList.toggle(\"selected\");\r\n    });\r\n\r\n\r\n    draggable(li)\r\n        .setData(\"fruits\", function() {\r\n            return [].map.call(document.querySelectorAll(\".fruits li.selected\"), function(e) {\r\n                return e.innerHTML;\r\n            });\r\n        })\r\n        .ghost(function() {\r\n            var dragImg = document.createElement(\"ul\");\r\n            [].forEach.call(document.querySelectorAll(\".fruits li.selected\"), function(li) {\r\n                dragImg.appendChild(li.cloneNode(true));\r\n            });\r\n\r\n            return dragImg;\r\n        });\r\n});\r\n\r\n\r\ndocument.getElementById(\"dropZone\")\r\n    .addEventListener(\"drop\", function(ev) {\r\n        this.innerHTML = ev.dataTransfer.getData(\"fruits\");\r\n    });\r\n\r\n```\r\n\r\nThis produces the following :\r\n\r\n[Custom drag image demo](http://stevendwood.github.io/html5-dropzone/examples/multi-select.html)\r\n\r\n####<code>event.getDropEffect()</code>\r\nIf you want to use the browsers native dropEffect property reliably to do something to the source element based on dropEffect - then you must allow only one effectAllowed copy, move or link if you do not set it it will become \"copy\".  Otherwise you should use the getDropEvent function in the dragend handler which reliably works in IE for compund values of the effectAllowed property.\r\n\r\n```html\r\n\r\n<ol dropzone=\"move string:text/x-example\" ondragstart=\"dragStartHandler(event)\" ondragend=\"dragEndHandler(event)\">\r\n\r\n<script>\r\n   /*\r\n       On drag start we allow the element to be moved or copied, on drag end we want to\r\n       remove the element if the selected dropEffect was \"move\". Because we used a \r\n       'compound' effectAllowed (copyMove), Internet Explorer unforunately reports that\r\n       the dropEffect was \"none\" on the dragend no matter what we set it to on dragover.\r\n       The effect will be set on the dropzone based on the keyboard modifiers, if none\r\n       were used, we get the default for the dropzone which was \"move\" in the markup above.\r\n    */\r\n   function dragStartHandler(event) {\r\n      if (event.target instanceof HTMLLIElement) {\r\n\r\n         event.dataTransfer.setData(\"text/x-my-type\", event.target.dataset.value);\r\n         event.dataTransfer.effectAllowed = 'copyMove'; // only allow copies or moves\r\n      } \r\n    }\r\n\r\n  function dragEndHandler(event) {\r\n        // use this instead of event.datatTransfer.dropEffect\r\n    var dropEffect = event.dataTransfer.getDropEffect();\r\n\r\n    if (dropEffect === \"move\") {\r\n         event.target.parentElement.removeChild(event.target);\r\n    }\r\n  }\r\n</script>\r\n\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}